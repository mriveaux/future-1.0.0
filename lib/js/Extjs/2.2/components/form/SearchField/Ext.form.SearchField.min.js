
if(!Ext.form){Ext.ns("Ext.form")}Ext.form.SearchField=Ext.extend(Ext.form.TwinTriggerField,{validationEvent:false,validateOnBlur:false,selectOnFocus:true,hasSearch:false,hideTrigger1:true,lbTtlElement:undefined,trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger",clearTooltip:"Limpiar filtros <strong>(Esc)</strong>",searchTooltip:"Buscar datos <strong>(Enter)</strong>",emptyText:"Criterio a buscar...",fnOnClear:Ext.emptyFn,fnOnSearch:Ext.emptyFn,width:200,store:undefined,loader:undefined,initComponent:function(a){Ext.apply(this,a);if(!this.id){var b=Ext.DomQuery.select("span img[class*=x-form-search-trigger]");this.id="x-form-search"+(b.length+1)}Ext.form.SearchField.superclass.initComponent.call(this);this.triggerConfig.cn[0].qtip=this.clearTooltip;this.triggerConfig.cn[1].qtip=(this.lbTtlElement!=undefined)?String.format("Buscar {0} <strong>(Enter)</strong>",this.lbTtlElement):this.searchTooltip;this.on({specialkey:{fn:function(c,d){if(d.getKey()==d.ENTER||d.getKey()==13){this.onTrigger2Click()}if(d.getKey()==d.ESC||d.getKey()==27){d.stopEvent();this.onTrigger1Click();c.triggerBlur()}},scope:this}})},onTrigger1Click:function(){this.el.dom.value="";this.blur();this.reset();if(this.hasSearch){this.hasSearch=false;this.triggers[0].hide();if(typeof(this.fnOnClear)=="function"){this.fnOnClear()}}},onTrigger2Click:function(){var a=this.getRawValue();if(a.length<1){this.onTrigger1Click();return}this.hasSearch=true;this.triggers[0].show();if(typeof(this.fnOnSearch)=="function"){this.fnOnSearch()}if(this.store&&this.store!=undefined){this.store.on({load:function(b,d,c){c.callback=function(){if(parseInt(b.getTotalCount())===0){if(lMask!=undefined){lMask.hide()}MensajeInformacion("No hay resultados para mostrar.")}}}})}if(this.loader&&this.loader!=undefined){this.loader.on({load:function(c,e,b){var d=Ext.decode(b.responseText);if(parseInt(d.length)===0){MensajeInformacion("No hay resultados para mostrar.")}}})}}});Ext.reg("searchfield",Ext.form.SearchField);